{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Documents\\\\ipondwebsite2\\\\src\\\\components\\\\Monitoring\\\\HistoryChart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./historychart.css\";\nimport { LineChart, ResponsiveContainer, Legend, Tooltip, Line, XAxis, YAxis, CartesianGrid } from \"recharts\";\nimport { ref, onValue } from \"firebase/database\";\nimport { db } from \"../../firebase\";\nimport moment from \"moment\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction HistoryChart() {\n  _s();\n  const [data, setData] = useState([]);\n  const [startDate, setStartDate] = useState(null);\n  const [endDate, setEndDate] = useState(null);\n  useEffect(() => {\n    const dataref = ref(db, \"/Data_MyIpond/Data_Json\");\n    const unsubscribedata = onValue(dataref, snapshot => {\n      const fetchdata = snapshot.val();\n      const chartdata = Object.keys(fetchdata).map(key => ({\n        date: moment(fetchdata[key].Tanggal).toDate(),\n        // Use moment to parse the date\n        pH: parseFloat(fetchdata[key].pH)\n      })).filter(item => {\n        if (startDate && endDate) {\n          return item.date >= startDate.startOf(\"day\").toDate() && item.date <= endDate.endOf(\"day\").toDate();\n        }\n        return true;\n      });\n      setData(chartdata);\n    });\n    return () => {\n      unsubscribedata();\n    };\n  }, [startDate, endDate]);\n  const handleDateFilter = (start, end) => {\n    setStartDate(start ? moment(start).startOf('day') : null);\n    setEndDate(end ? moment(end).endOf('day') : null);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"date-filter\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Tanggal Mulai:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        onChange: e => handleDateFilter(new Date(e.target.value), endDate === null || endDate === void 0 ? void 0 : endDate.toDate())\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"date-filter\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Tanggal Berakhir:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        onChange: e => handleDateFilter(startDate === null || startDate === void 0 ? void 0 : startDate.toDate(), new Date(e.target.value))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n      width: \"100%\",\n      height: 400,\n      children: /*#__PURE__*/_jsxDEV(LineChart, {\n        data: data,\n        width: 500,\n        height: 300,\n        margin: {\n          top: 20,\n          right: 30,\n          left: 20,\n          bottom: 5\n        },\n        children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n          strokeDasharray: \"3 1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n          dataKey: \"date\",\n          interval: \"preserveStartEnd\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(YAxis, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Line, {\n          type: \"monotone\",\n          dataKey: \"pH\",\n          strokeWidth: 1,\n          stroke: \"red\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(HistoryChart, \"tHakJRfbdRQ3yKjbu/2Tb2JJgc4=\");\n_c = HistoryChart;\nexport default HistoryChart;\nvar _c;\n$RefreshReg$(_c, \"HistoryChart\");","map":{"version":3,"names":["React","useState","useEffect","LineChart","ResponsiveContainer","Legend","Tooltip","Line","XAxis","YAxis","CartesianGrid","ref","onValue","db","moment","jsxDEV","_jsxDEV","Fragment","_Fragment","HistoryChart","_s","data","setData","startDate","setStartDate","endDate","setEndDate","dataref","unsubscribedata","snapshot","fetchdata","val","chartdata","Object","keys","map","key","date","Tanggal","toDate","pH","parseFloat","filter","item","startOf","endOf","handleDateFilter","start","end","children","className","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","e","Date","target","value","width","height","margin","top","right","left","bottom","strokeDasharray","dataKey","interval","strokeWidth","stroke","_c","$RefreshReg$"],"sources":["C:/Users/Lenovo/Documents/ipondwebsite2/src/components/Monitoring/HistoryChart.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./historychart.css\";\r\nimport {\r\n  LineChart,\r\n  ResponsiveContainer,\r\n  Legend,\r\n  Tooltip,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n} from \"recharts\";\r\nimport { ref, onValue } from \"firebase/database\";\r\nimport { db } from \"../../firebase\";\r\nimport moment from \"moment\";\r\n\r\nfunction HistoryChart() {\r\n  const [data, setData] = useState([]);\r\n  const [startDate, setStartDate] = useState(null);\r\n  const [endDate, setEndDate] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const dataref = ref(db, \"/Data_MyIpond/Data_Json\");\r\n    const unsubscribedata = onValue(dataref, (snapshot) => {\r\n    const fetchdata = snapshot.val();\r\n    const chartdata = Object.keys(fetchdata)\r\n      .map((key) => ({\r\n        date: moment(fetchdata[key].Tanggal).toDate(), // Use moment to parse the date\r\n        pH: parseFloat(fetchdata[key].pH),\r\n      }))\r\n      .filter((item) => {\r\n        if (startDate && endDate) {\r\n          return (\r\n            item.date >= startDate.startOf(\"day\").toDate() &&\r\n            item.date <= endDate.endOf(\"day\").toDate()\r\n          );\r\n        }\r\n        return true;\r\n      });\r\n    \r\n      setData(chartdata);\r\n    });\r\n    return () => {\r\n      unsubscribedata();\r\n    };\r\n  }, [startDate, endDate]);\r\n\r\n  const handleDateFilter = (start, end) => {\r\n    setStartDate(start ? moment(start).startOf('day') : null);\r\n    setEndDate(end ? moment(end).endOf('day') : null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"date-filter\">\r\n        <label>Tanggal Mulai:</label>\r\n        <input\r\n          type=\"date\"\r\n          onChange={(e) =>\r\n            handleDateFilter(new Date(e.target.value), endDate?.toDate())\r\n          }\r\n        />\r\n      </div>\r\n      <div className=\"date-filter\">\r\n        <label>Tanggal Berakhir:</label>\r\n        <input\r\n          type=\"date\"\r\n          onChange={(e) =>\r\n            handleDateFilter(startDate?.toDate(), new Date(e.target.value))\r\n          }\r\n        />\r\n      </div>\r\n      <ResponsiveContainer width=\"100%\" height={400}>\r\n        <LineChart\r\n          data={data}\r\n          width={500}\r\n          height={300}\r\n          margin={{ top: 20, right: 30, left: 20, bottom: 5 }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"3 1\" />\r\n          <XAxis dataKey=\"date\" interval={\"preserveStartEnd\"} />\r\n          <YAxis></YAxis>\r\n          <Legend />\r\n          <Tooltip />\r\n          <Line type=\"monotone\" dataKey=\"pH\" strokeWidth={1} stroke=\"red\" />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default HistoryChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}